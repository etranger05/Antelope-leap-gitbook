# 트랜잭션 프로토콜(작업중)

## 개요

액션은 스마트 컨트랙트 내에서 수행되는 원자적 행동(수행하면 중단할 수 없는 하나의 동작 단위)을 의미합니다. 더 높은 레벨에서 보면, 트랜잭션은 분산 응용프로그램 내에서 자동으로 실행되는 액션의 그룹으로 이루어집니다. 데이터베이스 트랜잭션과 유사하게 블록체인 트랜잭션을 구성하는 액션 그룹은 미리 정의된 순서대로 하나씩 성공해야 합니다. 그렇지 않으면 트랜잭션이 실패합니다. 트랜잭션 실패 시 트랜잭션 원자성 및 무결성을 유지하기 위해 블록체인 상태는 트랜잭션 처리 전 상태와 일치하는 상태로 복원됩니다. 이렇게 하면 실패 지점 이전에 실행된 동작에서 부작용이 발생하지 않습니다.

### 액션

액션은 미리 블록체인에 만들어져 있던 하나 이상의 행위자(actor)에 의해 승인될 수 있습니다. 액션을 만들 때는 스마트 컨트랙트 내에서 명시적으로 만들거나 응용프로그램 코드로 암시적으로 액션을 만들 수 있습니다.&#x20;

주어진 `actor:action` 쌍에 대해 최대 한 개의 최소 권한이 명시적으로 부여됩니다. 명시적으로 최소 사용 권한이 설정되지 않은 경우 암시적인 기본값은 `actor@active` 입니다. 각 행위자는 주어진 액션에 대한 개인 최소 권한을 독립적으로 설정할 수 있습니다. 또한 Mandel 소프트웨어 내에 복잡하지만 유연한 인증 구조가 구축되어 있어 행위자가 다른 계정을 대신하여 액션을 수행할 수도 있습니다. 이 때는 행위자가 액션을 보낼 수 있도록 추가 검사가 이루어집니다.

트랜잭션에는 두 가지 유형의 액션이 있습니다. 두 타입은 Mandel 소프트웨어에서 실행되는 방법이 다릅니다.

1. 서명된 트랜잭션에서 볼 수 있는 명시적 액션(2 참조). 트랜잭션 인스턴스).&#x20;
2. 트랜잭션 처리의 부작용으로 생성되는 암시적(인라인) 액션.&#x20;

명시적 액션과 마찬가지로 암시적(인라인) 액션도 스마트 컨트랙트 코드에 정의됩니다. 주요 차이점은 인라인 액션은 네트워크를 통해 전파되는 실제 트랜잭션에 포함되지 않고 결국 블록에 포함된다는 것입니다. 그래서 암시적이라 합니다.

#### 명시적 액션

명시적 액션이라고도 불리는 정규(Regular) 액션은 이름에서 알 수 있듯이 트랜잭션을 구성하는 실제 액션 목록에 포함됩니다. 명시적 액션은 트랜잭션에 삽입되기 전에 액션 인스턴스로 인코딩 됩니다(3.4.3 참조). 명시적 액션에는 트랜잭션의 일부로 실행될 액션과 그에 연관된 페이로드 데이터도 포함됩니다.&#x20;

#### 암시적 액션

암시적 성격을 가지는 인라인 액션은 트랜잭션 내에서 명시적 호출자 액션(또는 중첩된(nested) 경우 다른 인라인 액션)의 결과로 생성되며, 호출자 액션을 계속 수행하려면 해당 암시적 액션이 필요합니다. 따라서 인라인 액션은 호출자 액션의 동일한 범위 및 권한 내에서 작동합니다. 그렇기 때문에 인라인 액션은 동일한 트랜잭션 내에서 실행될 수 있습니다.

### 스마트 컨트랙트

Mandel 에서 스마트 컨트랙트는은 일반적으로 기능별로 그룹화된 일련의 액션과 이러한 액션이 의존하는 일련의 타입 정의로 구성됩니다. 따라서, 액션은 컨트랙트가 어떤 행동을 하는지 명시하고 정의한다고 볼 수 있습니다. 계정 생성, BP 투표, 토큰 운영 과 같은 작업을 하기 위해 표준 Mandel 컨트랙트에 몇 가지 액션이 구현되어 있습니다. 응용프로그램 개발자는 자신의 스마트 컨트랙트 및 응용프로그램 내에서 자신의 커스텀 액션을 만들어 이 기능을 확장하거나, 대체하거나 또는 비활성화할 수 있습니다. 반면 트랜잭션은 일반적으로 애플리케이션 수준에서 생성됩니다. 현명한 계약은 그들에 대한 불가지론입니다.

#### 스마트 컨트랙트 구현

Mandel 스마트 컨트랙트는 `eosio::contract` 에서 파생된 C++ 클래스로 구현됩니다. 액션은 파생된 C++ 클래스 안의 C++ 메소드로 구현됩니다. 반면 트랜잭션은 Mandel 응용프로그램 내에서 동적으로(트랜잭션 인스턴스로) 생성됩니다. Mandel 소프트웨어는 각 트랜잭션 인스턴스를 처리하고 생성, 서명, 유효성 검사 및 실행 하는 단계로 발전하는 동안 상태를 추적합니다.
