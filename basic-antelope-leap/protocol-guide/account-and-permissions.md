---
description: Account and Permissions
---

# 계정과 권한

## 개요

계정은 Antelope 블록체인의 참여자를 식별하는 수단입니다. 여기서 이야기하는 참여자는, 계정 안에서 할당된 권한에 따라 개인이나 그룹이 될 수 있습니다. 계정은 블록체인의 다른 계정으로부터 액션을 푸시하고 받는 스마트 컨트랙트 행위자(Smart Contract Actor)를 대표하기도 합니다. 액션은 반드시 트랜잭션에 포함되어 있어야 하며, 트랜잭션은 하나 이상의 독립적인 액션이 모여 만들어집니다.

계정에 연결된 권한은 다른 계정에 대한 액션과 트랜잭션을 승인하는 데 사용됩니다. 각 권한은, 주어진 권한과 관련된 작업을 실행하기 위해 승인되어져야 하는데, 이를 위해 도달해야 하는 가중치 임계값을 가지고 있는 권한 테이블에 연결되어 있습니다. 다음 도표는 계정, 권한 및 승인 간의 관계를 보여줍니다.

![](<../../.gitbook/assets/image (1) (2).png>)

위의 그림은 앨리스의 계정, 앨리스의 명명된 권한과 권한의 계층 의존성, 그리고 앨리스의 연결된 active 권한의 승인 테이블을 보여주고 있습니다. 또한 active 인증과 관련된 액션이 앨리스에 의해 또는 앨리스 대신 실행될 수 있도록 하기 위해서는 앨리스의 active 승인표에서 2의 가중치 임계값에 도달해야 함을 보여줍니다.

### 계정

계정은 사람이 읽을 수 있는 1에서 12자 사이의 길이의 이름을 가집니다. 문자에는 a-z, 1-5 및 마침표(.)를 쓸 수 있습니다.(단 마침표는 이름의 마지막 문자로 쓸 수 없습니다) 이렇게 하면 정확히 2의 60승에서 1을 뺀 수 만큼의 계정을 만들 수 있습니다.

![](<../../.gitbook/assets/image (2) (1).png>)

Antelope 블록체인에서 각 계정의 소유권은 전적으로 계정 이름에 의해 결정됩니다. 따라서 어떤 계정은 자신의 키를 다른 이들에게 별도로 재배포할 필요 없이 갱신할 수 있습니다.

#### 계정 스키마

Antelope 블록체인은 계정 이름 외에도 램 할당량/사용량, CPU/Net 제한 및 가중치, 투표자 정보 등 체인 데이터베이스에 저장된 각 계정 인스턴스와 다른 필드를 연결합니다(아래 계정 스키마 참조). 보다 중요한 것은 각 계정에 할당되어 있는, 명명된 권한 목록을 각 계정이 가지고 있다는 것입니다. 이를 통해 단일 사용자 혹은 다중 사용자 인증을 할 수 있는 유연한 권한 구조를 가질 수 있습니다.(3 참조). 권한).

[계정 스키마](https://www.notion.so/2c19c2247fa040c0a52afa0d220c66fa)

name 타입은 영숫자를 5비트 청크(chunk)로 인코딩하는 64비트 값으로 구성되며, 마지막 문자(있는 경우)가 있는 경우 4비트 청크를 사용한다. name 타입은 계정 이름, 액션 이름 등을 인코딩하는 데 사용됩니다. time\_point 타입은 타임스탬프를 마이크로초 단위로 저장합니다. asset 타입은 통화 또는 토큰 기호를 주어진 금액과 연결짓습니는다.

account\_resource\_limit 타입은 지정된 리소스(NET 또는 CPU)에 대해 주어진 범위에서 사용된 수량, 사용할 수 있는 수량, 최대량을 추적합니다. permission 타입은 계정과 관련된 권한 수준 목록을 보관합니다(3 참조). 권한).

### 액션과 트랜잭션

Antelope 블록체인의 참여자를 구분하는 역할 외에도, 액션과 트랜잭션은 계정이 존재해야 하는 또 다른 이유입니다. 액션을 푸시하거나 보낼 때 한 명 이상의 행위자(actor)가 필요하고 액션이 향하는수신인 계정 또한 필요합니다. 액션 영수증에 액션이 의도된 수령인에게 푸시되었다는 증거를 남길 때도 수취인 계정이 필요합니다.

이와는 대조적으로, 트랜잭션은 계정과는 무관하지만, 연관된 키를 통해 간접적으로 연결됩니다. 트랜잭션은 트랜잭션를 형성하는 액션에 관련된 하나 이상의 행위자가 가지고 있는 하나 이상의 서명 키를 사용하여 서명됩니다. 이는 수령 계정 자체, 또는 수령 계정의 허락을 통해 권한 테이블에 명시된 다른 인가된 행위자가 될 수 있습니다.

## 권한

권한은 EOSIO 계정이 수행할 수 있는 작업과 작업 권한을 부여하는 방법을 컨트롤합니다. 이는 각 계정을 계층별로 명명된 권한 목록과 각 명명된 권한을 승인 테이블에 연결하는 유연한 권한 구조를 통해 이루어집니다(아래 권한 스키마 참조).

[권한 스키마](https://www.notion.so/1d8f2a177ddf4438b16ed9f498f1865c)

### 권한 레벨

명명된 권한은 다른 권한 아래에 생성될 수 있으므로 계층적 부모:자식 권한 구조가 허용됩니다. 이를 통해 주어진 `actor:child-permisson` 이 `actor:parent-permission` 도 충족되는 경우 암묵적으로 충족되도록 허용함으로써 암묵적인 액션 승인이 가능해집니다. 조치를 실행하도록 승인하려면 승인 정족수 또는 "임계값"이 충족되어야 합니다(3.2.2 참조). 권한 임계값).

{% hint style="info" %}
사용자 지정 권한 EOSIO는 소유자 권한에서 비롯되는 사용자 정의 계층 권한을 만들 수 있습니다. 이를 통해 액션 인증을 보다 세부적으로 제어할 수 있습니다. active 권한이 훼손될 경우에 대비해 보안도 강화할 수 있습니다.
{% endhint %}

#### 권한 테이블

각 계정의 권한은 주어진 액션 권한이 충족될 수 있는지 여부를 결정하는 데 사용되는 권한 테이블에 연결될 수 있습니다. 권한 테이블에는 해당 권한 이름과 임계값, "요인" 및 가중치가 수록되어 있으며, 모두 평가에 사용되어 허가가 충족될 수 있는지 여부를 결정하는데 사용됩니다. 권한 임계값은 작업이 승인되기 위해 충족해야 하는 숫자 값입니다(아래 권한 스키마 참조).

[승인 스키마](https://www.notion.so/04160cc8d5f44360bc0b950df4fecb55)

key\_weight 타입에는 행위자의 공개 키와 관련 가중치가 포함되어 있습니다. permission\_level\_weight 타입은 행위자의 account@permission 레벨과 관련 가중치로 구성됩니다. wait\_weight에는 time waits 및 관련 가중치가 포함되어 있습니다(지연된 사용자 트랜잭션에서 작업 승인을 만족하는 데 사용됨(Transactions Protocol: 3.6.3 참조). 지연된 사용자 트랜잭션). 이러한 모든 형식은 액션이 인증되는 조건을 만족시키기 위해 사용되는 권한 요인의 목록을 정의할 수 있습다(3.2.1 참조). 권한 요인).

#### 승인 요인(Authority Factors)

어떠한 권한에 연결된 모든 승인 테이블에는 액션 승인 권한의 평가에 명시적으로 사용되는 잠재적 "요소"가 나열된다. 요인 유형은 다음 중 하나일 수 있습니다.

* 행위자의 계정 이름 및 권한 수준
* 행위자의 공개키
* 대기 시간

액션을 실행할 수 있는 잠재적 행위자는 승인 표에 공개 키 또는 계정 이름으로 지정됩니다. 대기 시간은 정해진 시간을 초과하는 지연된 거래를 발행함으로써 충족되는 특별한 요인입니다. 이러한 것들은 임계값을 만족시키는 데 기여할 수 있는 가중치도 지니고 있습니다.

#### 승인 임계값

주어진 액션에 대한 권한 부여는 액션 인스턴스에 지정된 모든 명시적 승인을 만족함으로써 결정됩니다(트랜잭션 프로토콜: 3.4.3 참조). 작업 인스턴스). 각 "요인"(계정, 공개키, 대기)이 만족(잠재적으로 재귀적으로)을 평가하고 만족한 요인의 가중치를 합산하여 개별 만족합니다. 합계가 중량 임계값과 같거나 초과하면 액션이 승인됩니다.

#### 승인 예제

Publish 로 명명된 앨리스의 퍼미션에 대한 권한 테이블은 다음과 같습니다. 내용을 살펴보면, 이 퍼미션에 속한 액션을 승인하기 위해서는 2의 임계값에 도달해야 하는 것을 알 수 있습니다. bob@active 인자와 stacy@active 인자는 모두 2의 가중치를 가지기 때문에, 어느 한 쪽이 액션의 승인 조건을 만족시킬 수 있습니다. 이는 승인 수준이 active 이상인 bob 또는 stacy 중 하나가 앨리스의 publish 승인 조건에 따라 독립적으로 어떤 액션도 실행할 수 있다는 것을 의미합니다.

[승인 테이블](https://www.notion.so/fd1f14f9b9e1402b9eb6071b35a528ec)

또한 승인 테이블의 각 공개키의 가중치가 1이기 때문에, 액션 승인을 만족시키기 위해서는 공개 키 EOS7Hnv4iBfcw2.. 와 EOS3Wo1p9er7fh...가 있는 두 개의 계정이 필요할 것입니다.

#### 권한 매핑

주어진 계정은 명명된 권한과 그 계약 내의 스마트 컨트랙트 또는 액션 사이의 매핑을 정의할 수 있습니다. 이는 contract\[::action]에 필요한 "최소 권한"을 설정합니다. 그러나, contract\[::action]을 실행하기 위한 접근권한이나 승인 등 다른 어떤 것도 부여되지 않습니다. 이것은 의도된 설계이며, 프로세스는 다음에 설명된 승인 평가 메커니즘에 의해 제어됩니다.

### 권한 평가

액션의 실행 허가 여부를 결정할 때 EOSIO 소프트웨어는 먼저 트랜잭션에서 제공된 서명이 유효한지 여부를 확인합니다(3.4.2 참조). 서명 검증). 그런 다음 트랜잭션에 포함된 모든 액션의 승인 여부를 확인하는 작업을 진행합니다. 여기서 권한을 평가한다. 승인 임계값이 충족되지 않아 승인을 받지 못하는 액션이 하나 이상 있는 경우(3.2.2 참조). 권한 임계값), 트랜잭션은 실패하게 됩니다.

#### 사용자 정의 권한

기본적으로 EOSIO 블록체인의 모든 계정은 active 퍼미션에 연결되어 있다. 다시 말하지만, 이는 active 퍼미션에서 자식 권한을 생성하거나 owner 퍼미션 아래에 대체 권한을 생성하여 사용자 정의할 수 있다(3.1 참조). 권한 수준). active와는 별개로 owner 아래에 사용자 정의 권한을 생성하는 것을 권장한다. active 퍼미션과 관련된 키가 유출되어도 계정의 보안을 지킬 수 있기 때문이다.

{% hint style="info" %}
예를 들어 소셜 미디어 응용 프로그램에 메시지를 올리기 위해 만든 게시 권한이 있다고 가정해 보겠습니다. 이 권한을 자금을 이체하거나 인출하는 것과 같은 민감한 행동에 사용하고 싶지는 않을 것입니다. 이 시나리오에서는, `social::post` 액션을 `publish` 퍼미션에 연결하는 것이 올바른 방법이다. 이렇게 하면 `post` 를 승인할 수 있지만 다른 액션에 대한 기본 `active` 권한을 충족할 수 없는 권한 구조를 정의할 수 있게 됩니다. 그러한 권한 구조는 자기 자신을 다른 계정의 아무 명명된 퍼미션 레벨에나 위임할 수 있습니다. 만약 그것이 다른 계정에 대한 다른 public 퍼미션을 그렇게 했다면, 그것은 순전히 우연의 일치일 것입니다.
{% endhint %}

#### 서명 검증

권한과 연계된 만족스러운 당국에는 무엇보다도 거래에 서명한 공개 키의 유효성 확인/복구가 포함됩니다. 노드에서 서명된 트랜잭션을 수신한 후, 트랜잭션 인스턴스에서 서명 집합을 추출합니다. 그런 다음 공개 키 집합이 서명에서 복구됩니다. 그런 다음 트랜잭션에 포함된 모든 액션에 대해, 노드는 각 `actor:permission` 이 계정별 권한 링크에 의해 정의된 최소 권한을 충족하거나 초과하는지 점검합니다.

유효성이 확인되면 복구된 키 집합이 "대기" 시간과 함께 인증 관리자 인스턴스에 제공됩니다. 그런 다음 인가 관리자는 제공된 "요인"이 승인 조건을 만족하는지, 다른 연계된 허가 수준/권한으로 재귀될 가능성이 있는지 점검합니다(3.2 참조). 권한 테이블 및 트랜잭션 프로토콜: 3.4. 자세한 내용은 트랜잭션 확인).
